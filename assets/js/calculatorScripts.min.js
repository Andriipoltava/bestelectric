(function($){$(document).ready((function(){const CalcFrom=function($scope,$){$("body").on("click",".cvy_input_trigger",(function(){var input=$(this).parent().find("input"),value=+$(input).val(),step=+$(input).data("step"),max=+$(input).data("max"),min=+$(input).data("min");if($(this).hasClass("cvy_minus_trigger"))value-=step;else value+=step;if(value<min||max&&value>=max)return;$(input).val(value)}));$("body").on("click",'.reset_calculator, .close-calculator,.o-popup[data-popup="calc"] .JS--close-popup',(function(){resetCalculator();resizable(document.getElementById("input-area"),inputAreaFactor);return false}));$("body").on("change",'#grouped-calculator [name="units"]',(function(){if($(this).is(":checked"))$("#grouped-calculator .input.area .JS--input-area span").html("ft<sup>2</sup>");else $("#grouped-calculator .input.area .JS--input-area span").html("m<sup>2</sup>")}));$("#grouped-calculator input, #grouped-calculator select").bind("change",(function(){$("#super-product-table tr").show();$("#super-product-table tbody .qty").val(0)}));$("body").on("click",".JS--input-area-manual",(function(){$(this).closest(".JS--input-area").find("input").removeClass("validate-area--disabled").focus()}));var select=$('[name="insulation"]');$("body").on("keyup","#grouped-calculator [name='area']",(function(){$("#grouped-calculator [name='height'], #grouped-calculator [name='width']").val("")}));$("body").on("keyup","#grouped-calculator [name='height'],#grouped-calculator [name='width']",(function(){if(val("width")&&val("height")){var y=val("width")*val("height");$("#grouped-calculator [name='area']").val(y)}}));var inputAreaFactor=11;if($(window).width()<768)inputAreaFactor=9;if(0!==$("#input-area").length)resizable(document.getElementById("input-area"),inputAreaFactor);$("body").on("focus","#input-area",(function(){$(this).parent().addClass("input-area__holder--focused")}));$("body").on("focusout","#input-area",(function(){$(this).parent().removeClass("input-area__holder--focused")}));$("body").on("click","#grouped-calculator .increase",(function(){var value=+$(this).parent().find("input").val();$(this).parent().find("input").val(value+.5);$(this).parent().find("input").trigger("keyup");resizable(document.getElementById("input-area"),inputAreaFactor)}));$("body").on("click","#grouped-calculator .decrease",(function(){var value=+$(this).parent().find("input").val();if(value>0)$(this).parent().find("input").val(value-.5);$(this).parent().find("input").trigger("keyup");resizable(document.getElementById("input-area"),inputAreaFactor)}));$("body").on("change",'#grouped-calculator [name="room_type"]',(function(){$('#grouped-calculator [name="north_facing"]').closest(".input").show();$('#grouped-calculator [name="ext_walls"]').removeAttr("disabled");if("conservatory"==$(this).val()||"attic"==$(this).val()){$('#grouped-calculator [name="ext_walls"]').attr("disabled","disabled");$('#grouped-calculator [name="north_facing"]').closest(".input").hide()}}));$("body").on("click",".cvy_radiator_variation_list_footer .cvy_show_all",(function(){jQuery('.cvy_options_field[data-key="attribute_pa_wattage"] .cvy_filter_option[data-value="all"]').click();jQuery(".cvy_radiator_variation_list_footer .cvy_show_all_wrapper").removeClass("cvy_visible")}));$("body").on("click",".cvy_filter .cvy_filter_option",(function(){$(this).closest(".cvy_options_field").find(".cvy_filter_option").removeClass("cvy_active");$(this).addClass("cvy_active");applyVariationListFilter()}));function scrollToResults(){let addScroll=0;if($(".elementor-location-popup").length){var scrollContainer=$(".dialog-lightbox-widget-content .dialog-message");addScroll+=120}else{var scrollContainer=$("html");addScroll=-50}var element=$("#grouped-calculator .cvy_best_matches_message");scrollContainer.animate({scrollTop:element.offset().top+addScroll},300)}function scrollAfterReset(){var scrollContainer=$(".o-popup");var element=$(".o-popup__content");scrollContainer.animate({scrollTop:$(".o-popup__content").offset().top-scrollContainer.offset().top+scrollContainer.scrollTop()-30},300)}function applyVariationListFilter(){var activeFilters=false;$(".cvy_variation_list_item").removeClass("cvy_filtered");$(".cvy_filter .cvy_options_field").each((function(){var optionKey=$(this).data("key"),filterOptionValue=$(this).find(".cvy_filter_option.cvy_active").data("value");if("all"!==filterOptionValue){$(".cvy_variation_list_item").each((function(){var itemOptionValue=$(this).data(optionKey);if(itemOptionValue&&itemOptionValue!==filterOptionValue)$(this).addClass("cvy_filtered")}));activeFilters=true}}))}function resetVariationListFilter(){$('.cvy_filter .cvy_filter_option[data-value="all"]').click()}function resetCalculator(){var calculator=jQuery("#grouped-calculator");var toggler=jQuery(".yn-toggler.on");if(toggler)toggler.trigger("click");calculator.find('input[type="number"]').val("");calculator.find('[name="north_facing"]').closest(".input").show();var currentWallsVal=calculator.find('[name="ext_walls"]:checked').val();if(2!==currentWallsVal){calculator.find('[name="ext_walls"]').prop("checked",false).prop("disabled",false);calculator.find('[name="ext_walls"]').filter('[value="2"]').prop("checked",true)}var currentHeightVal=calculator.find('[name="height_2"]:checked').val();if("h2"!==currentHeightVal){calculator.find('[name="height_2"]').prop("checked",false);calculator.find('[name="height_2"]').filter('[value="h2"]').prop("checked",true)}var currentRoomTypeVal=calculator.find('[name="room_type"]:checked').val();if("general_living_space"!==currentRoomTypeVal){calculator.find('[name="room_type"]').prop("checked",false);calculator.find('[name="room_type"]').filter('[value="general_living_space"]').prop("checked",true)}if(0==calculator.find('[name="insulation"]:checked').length)calculator.find('[name="insulation"]').prop("checked",true);if(0!==calculator.find('[name="has_stairs"]:checked').length)calculator.find('[name="has_stairs"]').prop("checked",false);if(0!==calculator.find('[name="north_facing"]:checked').length)calculator.find('[name="north_facing"]').prop("checked",false);if(0!==calculator.find('[name="units"]:checked').length){calculator.find('[name="units"]').prop("checked",false);$("#grouped-calculator .input.area .JS--input-area span").html("m<sup>2</sup>")}$(".JS--input-area").find("input").addClass("validate-area--disabled");jQuery("#super-product-table tbody tr").show();jQuery("#super-product-table tbody tr").find(".qty").val(0);jQuery(".cvy_best_matches_message").removeClass("cvy_visible");jQuery(".cvy_variation_list_item").removeClass("cvy_highlighted");jQuery('.cvy_options_field[data-key="attribute_pa_wattage"] .cvy_filter_option[data-value="all"]').click();jQuery(".cvy_radiator_variation_list_footer .cvy_show_all_wrapper").removeClass("cvy_visible");$(".s-product-calculator__help").removeClass("is-active");$(".JS--calculator-results").hide();resetVariationListFilter();scrollAfterReset()}function toggleCalculator(){var form=jQuery("#grouped-calculator form");if(false===form.hasClass("visible")){form.slideDown(200);form.addClass("visible");jQuery("#grouped-calculator .calculator-show").hide()}else form.slideUp(200,(function(){form.removeClass("visible");jQuery("#grouped-calculator .calculator-show").show()}))}function val(name){var values=jQuery("#grouped-calculator form").serializeArray();for(var i=0;i<values.length;i++)if(name==values[i].name)return values[i].value;return 0}function calculateAndApplyWattage(){var area=val("area");if(0==area)area=val("width")*val("height");if("1"==val("units"))area/=10.764;var y=100*area;if("0"==val("has_stairs")){var height_2=val("height_2");if("h1"==height_2)y*=90/100;if("h2"==height_2)y=y/100*100;if("h3"==height_2)y+=y/100*20;if("h4"==height_2)y+=y/100*30}if("1"==val("has_stairs"))y+=y/100*50;if("0"==val("insulation"))y+=y/100*20;if(["conservatory","attic"].indexOf(val("room_type"))>=0);else if(parseInt(val("ext_walls"))>2)y+=y/100*10;if(["conservatory","attic"].indexOf(val("room_type"))>=0);else if("1"==val("north_facing"))y+=y/100*10;if(["conservatory","garden_office","attic"].indexOf(val("room_type"))>=0)y+=y/100*25;if("livingroom"==val("room_type"))y+=y/100*10;var wattage=y;if(wattage<1)return false;jQuery(".cvy_radiator_variation_list .cvy_quantity input").val(0);if($("body").hasClass("single-product")){var wattages=[];jQuery(".cvy_variation_list_item").each((function(){var dataWattage=jQuery(this).data("attribute_pa_wattage");if(dataWattage)wattages.push(parseInt(jQuery(this).data("attribute_pa_wattage")))}));var min_wattage=Math.min.apply(null,wattages);var max_wattage=Math.max.apply(null,wattages);var qty=Math.ceil(wattage/max_wattage);var watt_req_per_rad=wattage/qty;var wattage_option=max_wattage;wattages.forEach((function(data_wattage){if(data_wattage>=watt_req_per_rad&&data_wattage<wattage_option)wattage_option=data_wattage}));jQuery("#grouped-calculator .cvy_best_matches_message .cvy_wattage_option").text(wattage_option);jQuery("#grouped-calculator .cvy_best_matches_message .cvy_quantity").text(qty)}else{var calculatedWattage=[];var calculatedQuantity=[];$(".JS--compare-ranges-item").each((function(){var wattages=[];$(this).find(".JS--compare-ranges-wattages").each((function(){var dataWattage=jQuery(this).data("attribute_pa_wattage");if(dataWattage)wattages.push(parseInt(jQuery(this).data("attribute_pa_wattage")))}));var min_wattage=Math.min.apply(null,wattages);var max_wattage=Math.max.apply(null,wattages);var qty=Math.ceil(wattage/max_wattage);var watt_req_per_rad=wattage/qty;var wattage_option=max_wattage;wattages.forEach((function(data_wattage){if(data_wattage>=watt_req_per_rad&&data_wattage<wattage_option)wattage_option=data_wattage}));$(this).find(".JS--ranges-recommended-wattage").text(wattage_option+"W").parent().show();var defaultFullProductUrl=$(this).find(".JS--recommended-product-link").attr("data-link");if(wattage_option)if("1800"==wattage_option){$(this).find(".c-compare-ranges__thumb-link").attr("href",defaultFullProductUrl+"?attribute_pa_wattage="+wattage_option+"&attribute_pa_el_type=ceramic");$(this).find(".JS--recommended-product-link").attr("href",defaultFullProductUrl+"?attribute_pa_wattage="+wattage_option+"&attribute_pa_el_type=ceramic")}else{$(this).find(".c-compare-ranges__thumb-link").attr("href",defaultFullProductUrl+"?attribute_pa_wattage="+wattage_option);$(this).find(".JS--recommended-product-link").attr("href",defaultFullProductUrl+"?attribute_pa_wattage="+wattage_option)}else{$(this).find(".c-compare-ranges__thumb-link").attr("href",defaultFullProductUrl);$(this).find(".JS--recommended-product-link").attr("href",defaultFullProductUrl)}if(qty>1)$(this).find(".JS--wattage-multiplier").text(qty+" x ");else $(this).find(".JS--wattage-multiplier").text("");var currentVariationPrice=$(this).find(".JS--compare-ranges-wattages[data-attribute_pa_wattage="+wattage_option+"]").attr("data-price");$(this).find(".JS--compare-ranges-price").html('From: <span class="woocommerce-Price-amount amount">'+currentVariationPrice+"</span>");calculatedWattage.push(wattage_option);calculatedQuantity.push(qty)}));jQuery("#grouped-calculator .cvy_best_matches_message .cvy_quantity").text(calculatedQuantity[0]);jQuery("#grouped-calculator .cvy_best_matches_message .cvy_wattage_option").text(calculatedWattage[0])}jQuery("#grouped-calculator .cvy_best_matches_message .cvy_wattage_total").text(Math.ceil(wattage));jQuery("#grouped-calculator .cvy_best_matches_message .cvy_room_area").text(val("area"));jQuery("#grouped-calculator .cvy_best_matches_message .cvy_room_area_units").text("1"===val("units")?"ft":"m");jQuery("#grouped-calculator .cvy_best_matches_message .cvy_room_type").text(jQuery('#grouped-calculator [name="room_type"]:checked').parent().find(".c-radio__title").text());jQuery("#grouped-calculator .cvy_best_matches_message").addClass("cvy_visible");jQuery('.cvy_options_field[data-key="attribute_pa_wattage"] .cvy_filter_option[data-value="'+wattage_option+'"]').click();jQuery('.cvy_variation_list_item[data-attribute_pa_wattage="'+wattage_option+'"]').addClass("cvy_highlighted");jQuery(".cvy_radiator_variation_list_footer .cvy_show_all_wrapper").addClass("cvy_visible");scrollToResults()}if(jQuery().fancybox){$(".js--open-video-popup").fancybox({});$("#view_360").fancybox({touch:false,afterShow:function(instance,slide){$(".reel").click()}})}$("body").on("submit","#grouped-calculator form",(function(e){e.preventDefault();$(".cvy_best_matches_message").addClass(".cvy_visible");calculateAndApplyWattage();$(".JS--calculator-results").fadeIn(300);if(jQuery(".JS-compare-ranges-slider"))jQuery(".JS-compare-ranges-slider")[0].swiper.update();return false}))};$(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/custom-calculator-form.default",CalcFrom)}))}));function sliderIndexF($this,min=1){let l=$this.currentBreakpoint,bl;if("max"===l)bl=min;else bl=$this.originalParams.breakpoints[l].slidesPerView;return bl}})(jQuery);
//# sourceMappingURL=calculatorScripts.min.js.map
